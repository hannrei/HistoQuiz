# Windows build environment using Wine for cross-compilation
FROM tobix/pywine:3.11

# Install PyInstaller and dependencies
WORKDIR /app

# Copy requirements
COPY requirements.txt .

# Install Python dependencies
RUN wine python -m pip install --no-cache-dir -r requirements.txt pyinstaller

# Copy application files
COPY . .

# Build script
CMD ["wine", "python", "-m", "PyInstaller", "--clean", "--onefile", "HistoQuiz.spec"]
